ARM GAS  C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"thermal_control.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/thermal_control.c"
  20              		.section	.text.round_to_two_decimal_places,"ax",%progbits
  21              		.align	1
  22              		.global	round_to_two_decimal_places
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	round_to_two_decimal_places:
  28              	.LVL0:
  29              	.LFB0:
   1:Core/Src/thermal_control.c **** //
   2:Core/Src/thermal_control.c **** // Created by M on 25/10/2023.
   3:Core/Src/thermal_control.c **** //
   4:Core/Src/thermal_control.c **** 
   5:Core/Src/thermal_control.c **** #include "thermal_control.h"
   6:Core/Src/thermal_control.c **** #include "math.h"
   7:Core/Src/thermal_control.c **** #include "configurables.h"
   8:Core/Src/thermal_control.c **** 
   9:Core/Src/thermal_control.c **** float logR2, R2;
  10:Core/Src/thermal_control.c **** 
  11:Core/Src/thermal_control.c **** int out = 0;
  12:Core/Src/thermal_control.c **** #define BETA 3950.0
  13:Core/Src/thermal_control.c **** #define T_25 298.15
  14:Core/Src/thermal_control.c **** #define R1 96600.0
  15:Core/Src/thermal_control.c **** #define R_T25 100000.0
  16:Core/Src/thermal_control.c **** 
  17:Core/Src/thermal_control.c **** 
  18:Core/Src/thermal_control.c **** double T;
  19:Core/Src/thermal_control.c **** 
  20:Core/Src/thermal_control.c **** double round_to_two_decimal_places(double value) {
  30              		.loc 1 20 50 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 20 50 is_stmt 0 view .LVU1
  35 0000 08B5     		push	{r3, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 3, -8
ARM GAS  C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s 			page 2


  39              		.cfi_offset 14, -4
  40 0002 51EC100B 		vmov	r0, r1, d0
  21:Core/Src/thermal_control.c ****     return round(value * 100.0) / 100.0;
  41              		.loc 1 21 5 is_stmt 1 view .LVU2
  42              		.loc 1 21 12 is_stmt 0 view .LVU3
  43 0006 0022     		movs	r2, #0
  44 0008 074B     		ldr	r3, .L3
  45 000a FFF7FEFF 		bl	__aeabi_dmul
  46              	.LVL1:
  47              		.loc 1 21 12 view .LVU4
  48 000e 41EC100B 		vmov	d0, r0, r1
  49 0012 FFF7FEFF 		bl	round
  50              	.LVL2:
  51 0016 51EC100B 		vmov	r0, r1, d0
  52              		.loc 1 21 33 discriminator 1 view .LVU5
  53 001a 0022     		movs	r2, #0
  54 001c 024B     		ldr	r3, .L3
  55 001e FFF7FEFF 		bl	__aeabi_ddiv
  56              	.LVL3:
  22:Core/Src/thermal_control.c **** }
  57              		.loc 1 22 1 view .LVU6
  58 0022 41EC100B 		vmov	d0, r0, r1
  59 0026 08BD     		pop	{r3, pc}
  60              	.L4:
  61              		.align	2
  62              	.L3:
  63 0028 00005940 		.word	1079574528
  64              		.cfi_endproc
  65              	.LFE0:
  67              		.section	.text.calc_temp,"ax",%progbits
  68              		.align	1
  69              		.global	calc_temp
  70              		.syntax unified
  71              		.thumb
  72              		.thumb_func
  74              	calc_temp:
  75              	.LVL4:
  76              	.LFB1:
  23:Core/Src/thermal_control.c **** double calc_temp(uint32_t adc)
  24:Core/Src/thermal_control.c **** {
  77              		.loc 1 24 1 is_stmt 1 view -0
  78              		.cfi_startproc
  79              		@ args = 0, pretend = 0, frame = 0
  80              		@ frame_needed = 0, uses_anonymous_args = 0
  81              		.loc 1 24 1 is_stmt 0 view .LVU8
  82 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  83              	.LCFI1:
  84              		.cfi_def_cfa_offset 24
  85              		.cfi_offset 3, -24
  86              		.cfi_offset 4, -20
  87              		.cfi_offset 5, -16
  88              		.cfi_offset 6, -12
  89              		.cfi_offset 7, -8
  90              		.cfi_offset 14, -4
  25:Core/Src/thermal_control.c ****     float adc_voltage = (float)adc * 3.3 / 4095;
  91              		.loc 1 25 5 is_stmt 1 view .LVU9
  92              	.LVL5:
ARM GAS  C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s 			page 3


  26:Core/Src/thermal_control.c ****     double r_ntc = R1 * (adc/4096.0)/(1-(adc/4096.0));
  93              		.loc 1 26 5 view .LVU10
  94              		.loc 1 26 29 is_stmt 0 view .LVU11
  95 0002 FFF7FEFF 		bl	__aeabi_ui2d
  96              	.LVL6:
  97              		.loc 1 26 29 view .LVU12
  98 0006 0022     		movs	r2, #0
  99 0008 274B     		ldr	r3, .L7+40
 100 000a FFF7FEFF 		bl	__aeabi_dmul
 101              	.LVL7:
 102 000e 0646     		mov	r6, r0
 103 0010 0F46     		mov	r7, r1
 104              		.loc 1 26 23 view .LVU13
 105 0012 1BA3     		adr	r3, .L7
 106 0014 D3E90023 		ldrd	r2, [r3]
 107 0018 FFF7FEFF 		bl	__aeabi_dmul
 108              	.LVL8:
 109 001c 0446     		mov	r4, r0
 110 001e 0D46     		mov	r5, r1
 111              		.loc 1 26 40 view .LVU14
 112 0020 3246     		mov	r2, r6
 113 0022 3B46     		mov	r3, r7
 114 0024 0020     		movs	r0, #0
 115 0026 2149     		ldr	r1, .L7+44
 116 0028 FFF7FEFF 		bl	__aeabi_dsub
 117              	.LVL9:
 118 002c 0246     		mov	r2, r0
 119 002e 0B46     		mov	r3, r1
 120              		.loc 1 26 12 view .LVU15
 121 0030 2046     		mov	r0, r4
 122 0032 2946     		mov	r1, r5
 123 0034 FFF7FEFF 		bl	__aeabi_ddiv
 124              	.LVL10:
  27:Core/Src/thermal_control.c **** 
  28:Core/Src/thermal_control.c ****     // Calculate temperature using Beta formula
  29:Core/Src/thermal_control.c ****     double temp_kelvin = BETA / (log(r_ntc / R_T25) + (BETA / T_25));
 125              		.loc 1 29 5 is_stmt 1 view .LVU16
 126              		.loc 1 29 34 is_stmt 0 view .LVU17
 127 0038 13A3     		adr	r3, .L7+8
 128 003a D3E90023 		ldrd	r2, [r3]
 129 003e FFF7FEFF 		bl	__aeabi_ddiv
 130              	.LVL11:
 131              		.loc 1 29 34 view .LVU18
 132 0042 41EC100B 		vmov	d0, r0, r1
 133 0046 FFF7FEFF 		bl	log
 134              	.LVL12:
 135 004a 51EC100B 		vmov	r0, r1, d0
 136              		.loc 1 29 53 discriminator 1 view .LVU19
 137 004e 10A3     		adr	r3, .L7+16
 138 0050 D3E90023 		ldrd	r2, [r3]
 139 0054 FFF7FEFF 		bl	__aeabi_dadd
 140              	.LVL13:
 141 0058 0246     		mov	r2, r0
 142 005a 0B46     		mov	r3, r1
 143              		.loc 1 29 12 discriminator 1 view .LVU20
 144 005c 0EA1     		adr	r1, .L7+24
 145 005e D1E90001 		ldrd	r0, [r1]
ARM GAS  C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s 			page 4


 146 0062 FFF7FEFF 		bl	__aeabi_ddiv
 147              	.LVL14:
  30:Core/Src/thermal_control.c ****     return round_to_two_decimal_places( temp_kelvin - 273.15);  // Convert to Celsius
 148              		.loc 1 30 5 is_stmt 1 view .LVU21
 149              		.loc 1 30 12 is_stmt 0 view .LVU22
 150 0066 0EA3     		adr	r3, .L7+32
 151 0068 D3E90023 		ldrd	r2, [r3]
 152 006c FFF7FEFF 		bl	__aeabi_dsub
 153              	.LVL15:
 154              		.loc 1 30 12 view .LVU23
 155 0070 41EC100B 		vmov	d0, r0, r1
 156 0074 FFF7FEFF 		bl	round_to_two_decimal_places
 157              	.LVL16:
  31:Core/Src/thermal_control.c **** 
  32:Core/Src/thermal_control.c **** }
 158              		.loc 1 32 1 view .LVU24
 159 0078 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 160              	.L8:
 161 007a 00BFAFF3 		.align	3
 161      0080
 162              	.L7:
 163 0080 00000000 		.word	0
 164 0084 8095F740 		.word	1089967488
 165 0088 00000000 		.word	0
 166 008c 006AF840 		.word	1090021888
 167 0090 10E0B7AF 		.word	-1346904048
 168 0094 297F2A40 		.word	1076526889
 169 0098 00000000 		.word	0
 170 009c 00DCAE40 		.word	1085201408
 171 00a0 66666666 		.word	1717986918
 172 00a4 66127140 		.word	1081152102
 173 00a8 0000303F 		.word	1060110336
 174 00ac 0000F03F 		.word	1072693248
 175              		.cfi_endproc
 176              	.LFE1:
 178              		.section	.text.calc_dac_value,"ax",%progbits
 179              		.align	1
 180              		.global	calc_dac_value
 181              		.syntax unified
 182              		.thumb
 183              		.thumb_func
 185              	calc_dac_value:
 186              	.LVL17:
 187              	.LFB2:
  33:Core/Src/thermal_control.c **** 
  34:Core/Src/thermal_control.c **** uint16_t calc_dac_value(float error,float integral, float derivative){
 188              		.loc 1 34 70 is_stmt 1 view -0
 189              		.cfi_startproc
 190              		@ args = 0, pretend = 0, frame = 0
 191              		@ frame_needed = 0, uses_anonymous_args = 0
 192              		@ link register save eliminated.
  35:Core/Src/thermal_control.c ****     //calculating output with PID formula
  36:Core/Src/thermal_control.c ****     double dac_out = PID_PROPORTIONAL * error + PID_INTEGRAL * integral + PID_DERIVATIVE * derivati
 193              		.loc 1 36 5 view .LVU26
 194              		.loc 1 36 39 is_stmt 0 view .LVU27
 195 0000 DFED097A 		vldr.32	s15, .L10
 196 0004 20EE270A 		vmul.f32	s0, s0, s15
ARM GAS  C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s 			page 5


 197              	.LVL18:
 198              		.loc 1 36 62 view .LVU28
 199 0008 9FED087A 		vldr.32	s14, .L10+4
 200 000c 60EE870A 		vmul.f32	s1, s1, s14
 201              	.LVL19:
 202              		.loc 1 36 47 view .LVU29
 203 0010 30EE200A 		vadd.f32	s0, s0, s1
 204              		.loc 1 36 90 view .LVU30
 205 0014 21EE271A 		vmul.f32	s2, s2, s15
 206              	.LVL20:
 207              		.loc 1 36 73 view .LVU31
 208 0018 30EE010A 		vadd.f32	s0, s0, s2
 209              	.LVL21:
  37:Core/Src/thermal_control.c **** 
  38:Core/Src/thermal_control.c **** 
  39:Core/Src/thermal_control.c **** 
  40:Core/Src/thermal_control.c **** 
  41:Core/Src/thermal_control.c ****     return (uint16_t)dac_out;
 210              		.loc 1 41 5 is_stmt 1 view .LVU32
 211              		.loc 1 41 12 is_stmt 0 view .LVU33
 212 001c BCEEC00A 		vcvt.u32.f32	s0, s0
 213              	.LVL22:
  42:Core/Src/thermal_control.c **** };
 214              		.loc 1 42 1 view .LVU34
 215 0020 10EE103A 		vmov	r3, s0	@ int
 216 0024 98B2     		uxth	r0, r3
 217 0026 7047     		bx	lr
 218              	.L11:
 219              		.align	2
 220              	.L10:
 221 0028 CDCCCC3D 		.word	1036831949
 222 002c 0AD7233C 		.word	1008981770
 223              		.cfi_endproc
 224              	.LFE2:
 226              		.global	T
 227              		.section	.bss.T,"aw",%nobits
 228              		.align	3
 231              	T:
 232 0000 00000000 		.space	8
 232      00000000 
 233              		.global	out
 234              		.section	.bss.out,"aw",%nobits
 235              		.align	2
 238              	out:
 239 0000 00000000 		.space	4
 240              		.global	R2
 241              		.section	.bss.R2,"aw",%nobits
 242              		.align	2
 245              	R2:
 246 0000 00000000 		.space	4
 247              		.global	logR2
 248              		.section	.bss.logR2,"aw",%nobits
 249              		.align	2
 252              	logR2:
 253 0000 00000000 		.space	4
 254              		.text
 255              	.Letext0:
ARM GAS  C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s 			page 6


 256              		.file 2 "c:/Program Files/ARMtoolchain/arm-none-eabi/include/machine/_default_types.h"
 257              		.file 3 "c:/Program Files/ARMtoolchain/arm-none-eabi/include/sys/_stdint.h"
 258              		.file 4 "c:/Program Files/ARMtoolchain/arm-none-eabi/include/math.h"
ARM GAS  C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 thermal_control.c
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:21     .text.round_to_two_decimal_places:00000000 $t
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:27     .text.round_to_two_decimal_places:00000000 round_to_two_decimal_places
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:63     .text.round_to_two_decimal_places:00000028 $d
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:68     .text.calc_temp:00000000 $t
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:74     .text.calc_temp:00000000 calc_temp
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:163    .text.calc_temp:00000080 $d
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:179    .text.calc_dac_value:00000000 $t
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:185    .text.calc_dac_value:00000000 calc_dac_value
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:221    .text.calc_dac_value:00000028 $d
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:231    .bss.T:00000000 T
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:228    .bss.T:00000000 $d
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:238    .bss.out:00000000 out
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:235    .bss.out:00000000 $d
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:245    .bss.R2:00000000 R2
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:242    .bss.R2:00000000 $d
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:252    .bss.logR2:00000000 logR2
C:\Users\oleku\AppData\Local\Temp\ccPSY7vf.s:249    .bss.logR2:00000000 $d

UNDEFINED SYMBOLS
__aeabi_dmul
round
__aeabi_ddiv
__aeabi_ui2d
__aeabi_dsub
log
__aeabi_dadd
